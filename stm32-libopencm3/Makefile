# Project name
BIN = stm32-libopencm3

# Include paths
OPENCM3_DIR = ./libopencm3

INC = -I$(OPENCM3_DIR)/include \
      -L$(OPENCM3_DIR)/lib

# Linker script generated by libopencm3
DEVICE = stm32f030r8
SRC_LD = $(BUILD_DIR)/$(DEVICE).ld

# Defines required by included libraries
DEF = -DSTM32F0

# OpenOCD setup
OPENOCD ?= openocd -f board/st_nucleo_f0.cfg

include ../cm-makefile/common.mk
include ../cm-makefile/openocd.mk
include libopencm3_ld.mk

LDFLAGS += -lopencm3_stm32f0
LDFLAGS += -nostartfiles

# TODO: Add a target to build libopencm3 with the same flags (debug level,
# ooptimization, architecture, toolchain, etc.)
